{"ast":null,"code":"import personService from '@/services/PersonsService';\nimport Toast from '../Toast.vue';\nexport default {\n  components: {\n    Toast\n  },\n  data() {\n    return {\n      isLoading: false,\n      person: {\n        id: 0,\n        name: '',\n        lastName: '',\n        genere: '',\n        birthday: ''\n      },\n      toast: {\n        mensaje: '',\n        clase: '',\n        mostrar: false,\n        titulo: ''\n      }\n    };\n  },\n  methods: {\n    async savePerson() {\n      //console.log(this.person)\n      if (this.person.id == 0) {\n        this.isLoading = true;\n        try {\n          const data = await personService.setPersonAsync(this.person);\n          this.person.id = data.id;\n          console.log(this.person);\n          this.$emit('guardarPersona', this.person);\n          this.resetPerson();\n          this.isLoading = false;\n          //Datos para mostrar el toast\n          this.toast.titulo = 'Aviso';\n          this.toast.mensaje = \"Datos registrados\";\n          this.toast.clase = \"text-info\";\n          this.toast.mostrar = true;\n          //se cierra el modal\n          document.getElementById('buttonCloseModal').click();\n        } catch (error) {\n          console.log(error);\n          this.isError = true;\n          alert(\"Ocurrio un error\");\n          this.closeModal();\n        }\n      } else {\n        console.log(\"Not implement\");\n      }\n    },\n    resetPerson() {\n      this.person.id = 0;\n      this.person.genere = '';\n      this.person.name = '';\n      this.person.lastName = '';\n      this.isLoading = false;\n    },\n    closeModal() {\n      document.getElementById('buttonCloseModal').click();\n    }\n  },\n  emits: ['guardarPersona']\n};","map":{"version":3,"mappings":"AA0DA,OAAOA,aAAY,MAAO,2BAA0B;AACpD,OAAOC,KAAI,MAAO,cAAa;AAE/B,eAAc;EACZC,UAAU,EAAC;IACTD;EACF,CAAC;EACDE,IAAI,GAAE;IACJ,OAAM;MACJC,SAAS,EAAE,KAAK;MAChBC,MAAM,EAAC;QACLC,EAAE,EAAC,CAAC;QACJC,IAAI,EAAC,EAAE;QACPC,QAAQ,EAAC,EAAE;QACXC,MAAM,EAAC,EAAE;QACTC,QAAQ,EAAE;MACZ,CAAC;MACDC,KAAK,EAAC;QACJC,OAAO,EAAC,EAAE;QACVC,KAAK,EAAC,EAAE;QACRC,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE;MACV;IACF;EACF,CAAC;EACDC,OAAO,EAAC;IACN,MAAMC,UAAU,GAAE;MACd;MACF,IAAG,IAAI,CAACZ,MAAM,CAACC,EAAC,IAAK,CAAC,EAAC;QACrB,IAAI,CAACF,SAAQ,GAAI,IAAG;QACpB,IAAG;UACD,MAAMD,IAAG,GAAI,MAAMH,aAAa,CAACkB,cAAc,CAAC,IAAI,CAACb,MAAM;UAC3D,IAAI,CAACA,MAAM,CAACC,EAAC,GAAIH,IAAI,CAACG,EAAC;UACvBa,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,MAAM;UACvB,IAAI,CAACgB,KAAK,CAAC,gBAAgB,EAAE,IAAI,CAAChB,MAAM;UACxC,IAAI,CAACiB,WAAW,EAAC;UACjB,IAAI,CAAClB,SAAQ,GAAI,KAAI;UACrB;UACA,IAAI,CAACO,KAAK,CAACI,MAAK,GAAI,OAAM;UAC1B,IAAI,CAACJ,KAAK,CAACC,OAAM,GAAI,mBAAkB;UACvC,IAAI,CAACD,KAAK,CAACE,KAAI,GAAI,WAAU;UAC7B,IAAI,CAACF,KAAK,CAACG,OAAM,GAAI,IAAG;UACxB;UACAS,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,KAAK,EAAC;QACpD,CAAC,QAAMC,KAAK,EAAC;UACXP,OAAO,CAACC,GAAG,CAACM,KAAK;UACjB,IAAI,CAACC,OAAM,GAAI,IAAG;UAClBC,KAAK,CAAC,kBAAkB;UACxB,IAAI,CAACC,UAAU,EAAC;QAClB;MACF,CAAC,MAAI;QACHV,OAAO,CAACC,GAAG,CAAC,eAAe;MAC7B;IACF,CAAC;IACDE,WAAW,GAAE;MACX,IAAI,CAACjB,MAAM,CAACC,EAAC,GAAI;MACjB,IAAI,CAACD,MAAM,CAACI,MAAK,GAAI,EAAC;MACtB,IAAI,CAACJ,MAAM,CAACE,IAAG,GAAI,EAAC;MACpB,IAAI,CAACF,MAAM,CAACG,QAAO,GAAI,EAAC;MACxB,IAAI,CAACJ,SAAQ,GAAI,KAAI;IACvB,CAAC;IACDyB,UAAU,GAAE;MACVN,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,KAAK,EAAC;IACpD;EACF,CAAC;EACDK,KAAK,EAAC,CAAC,gBAAgB;AACzB","names":["personService","Toast","components","data","isLoading","person","id","name","lastName","genere","birthday","toast","mensaje","clase","mostrar","titulo","methods","savePerson","setPersonAsync","console","log","$emit","resetPerson","document","getElementById","click","error","isError","alert","closeModal","emits"],"sourceRoot":"","sources":["C:\\Users\\vmartinez\\source\\repos\\RollCall\\rollcall-vue\\src\\components\\personas\\FormularioDePersona.vue"],"sourcesContent":["<template>\r\n          <!-- Button trigger modal -->\r\n      <button type=\"button\" class=\"btn btn-primary mb-2\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\r\n        Agregar persona\r\n      </button>\r\n\r\n        <!-- Modal -->\r\n      <form @submit.prevent=\"savePerson\">\r\n        <div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\" data-bs-autohide=\"true\" data-bs-delay=\"5000\">\r\n          <div class=\"modal-dialog modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Persona</h1>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"buttonCloseModal\"></button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n\r\n                  <div class=\"form-group\">\r\n                    <label for=\"name\">Nombre</label>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Nombre\" v-model=\"person.name\"  :disabled=\"isLoading\">                    \r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <label for=\"lastName\">Apellidos</label>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Apellidos\" v-model=\"person.lastName\" :disabled=\"isLoading\">\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <label for=\"birthday\">Fecha de nacimiento</label>\r\n                    <input type=\"date\" class=\"form-control\" placeholder=\"Fecha de nacimiento\" v-model=\"person.birthday\" :disabled=\"isLoading\">\r\n                  </div>     \r\n                  <div class=\"form-group\">\r\n                    <label for=\"genere\">Genero</label>\r\n                    <select name=\"genere\" class=\"form-select\" v-model=\"person.genere\" :disabled=\"isLoading\">\r\n                      <option value=\"\">Seleccione</option>\r\n                      <option value=\"Masculino\">Masculino</option>\r\n                      <option value=\"Femenino\">Femenino</option>\r\n                    </select>\r\n                  </div>                    \r\n                </div>\r\n\r\n                <div class=\"modal-footer\">\r\n                  <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" :disabled=\"isLoading\" @click=\"resetPerson\" id=\"formClose\">Cerrar</button>\r\n                  <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isLoading\">\r\n                    <span v-if=\"!isLoading\">Guardar</span>                   \r\n                    <span v-if=\"isLoading\">Un momento &nbsp;</span>\r\n                    <span v-if=\"isLoading\">\r\n                      <div class=\"spinner-border spinner-border-sm text-white\" role=\"status\"></div>\r\n                    </span>\r\n\r\n                  </button>        \r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </form>\r\n      <toast :clase=\"toast.clase\" :mensaje=\"toast.mensaje\" :mostrar=\"toast.mostrar\" :titulo=\"toast.titulo\"/>\r\n</template>\r\n\r\n<script>\r\nimport personService from '@/services/PersonsService'\r\nimport Toast from '../Toast.vue'\r\n\r\nexport default{\r\n  components:{\r\n    Toast\r\n  },\r\n  data(){\r\n    return{\r\n      isLoading: false,\r\n      person:{\r\n        id:0,\r\n        name:'',\r\n        lastName:'',\r\n        genere:'',\r\n        birthday: ''\r\n      },\r\n      toast:{\r\n        mensaje:'',\r\n        clase:'',\r\n        mostrar: false,\r\n        titulo: ''\r\n      }\r\n    }\r\n  }, \r\n  methods:{\r\n    async savePerson(){\r\n        //console.log(this.person)\r\n      if(this.person.id == 0){\r\n        this.isLoading = true          \r\n        try{\r\n          const data = await personService.setPersonAsync(this.person)\r\n          this.person.id = data.id\r\n          console.log(this.person)       \r\n          this.$emit('guardarPersona', this.person)\r\n          this.resetPerson()            \r\n          this.isLoading = false   \r\n          //Datos para mostrar el toast\r\n          this.toast.titulo = 'Aviso'\r\n          this.toast.mensaje = \"Datos registrados\"\r\n          this.toast.clase = \"text-info\"\r\n          this.toast.mostrar = true\r\n          //se cierra el modal\r\n          document.getElementById('buttonCloseModal').click()\r\n        }catch(error){\r\n          console.log(error)\r\n          this.isError = true\r\n          alert(\"Ocurrio un error\")            \r\n          this.closeModal()\r\n        }\r\n      }else{\r\n        console.log(\"Not implement\")\r\n      }\r\n    },\r\n    resetPerson(){\r\n      this.person.id = 0\r\n      this.person.genere = ''\r\n      this.person.name = ''\r\n      this.person.lastName = ''\r\n      this.isLoading = false\r\n    },\r\n    closeModal(){\r\n      document.getElementById('buttonCloseModal').click()\r\n    },\r\n  },\r\n  emits:['guardarPersona']\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
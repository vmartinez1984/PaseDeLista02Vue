{"ast":null,"code":"import personService from '@/services/PersonsService';\nimport personDelete from '@/components/PersonDelete.vue';\n//import Toast from './Toast.vue'\nimport ComponenteB from './ComponenteB.vue';\nexport default {\n  components: {\n    personDelete,\n    //Toast,\n    ComponenteB\n  },\n  name: 'person-vue',\n  data() {\n    return {\n      persons: [],\n      person: {\n        id: 0,\n        name: '',\n        lastName: '',\n        genere: '',\n        birthday: ''\n      },\n      isLoading: false,\n      isError: false,\n      showError: false,\n      isSuccess: false,\n      toast: {\n        mensaje: '',\n        clase: '',\n        mostrar: true,\n        titulo: ''\n      },\n      personaData: {}\n    };\n  },\n  created() {\n    this.getAllPersons();\n    //console.log(Toast)\n    console.log(this.objeto);\n  },\n  methods: {\n    enviarObjeto() {\n      this.personaData.nombre = 'Juan';\n      this.personaData.edad = '25';\n      this.$refs.componenteB.saludar();\n    },\n    async getAllPersons() {\n      try {\n        this.persons = await personService.getPersonsAsync();\n        //console.log(this.persons)\n        this.toast.mensaje = \"Lista cargada\";\n        this.toast.clase = \"text-primary\";\n        this.toast.mostrar = true;\n        //this.toast.titulo = 'Aviso'\n      } catch (error) {\n        this.isError = true;\n        this.showError = true;\n        this.hideToast();\n      }\n    },\n    hideToast() {\n      setTimeout(() => {\n        this.showError = false;\n      }, 5000);\n    },\n    hideToastSuccess() {\n      setTimeout(() => {\n        this.isSuccess = false;\n      }, 5000);\n    },\n    showToastSuccess() {\n      this.isSuccess = true;\n      setTimeout(() => {\n        this.isSuccess = false;\n      }, 5000);\n    },\n    async savePerson() {\n      //console.log(this.person)\n      if (this.person.id == 0) {\n        this.isLoading = true;\n        try {\n          const data = await personService.setPersonAsync(this.person);\n          console.log(data);\n          this.showToastSuccess();\n          document.getElementById('buttonCloseModal').click();\n          this.resetPerson();\n          await this.getAllPersons();\n          this.isLoading = false;\n        } catch (error) {\n          console.log(error);\n          this.isError = true;\n          alert(\"Ocurrio un error\");\n          this.closeModal();\n        }\n      } else {\n        console.log(\"Not implement\");\n      }\n    },\n    deletePerson(person) {\n      console.log(person);\n    },\n    resetPerson() {\n      this.person.id = 0;\n      this.person.genere = '';\n      this.person.name = '';\n      this.person.lastName = '';\n      this.isLoading = false;\n    },\n    closeModal() {\n      document.getElementById('buttonCloseModal').click();\n    },\n    mostrarToast() {\n      this.toast.mostrar = true;\n      this.toast.titulo = \"Aviso\";\n      this.toast.mensaje = 'webos puto';\n      this.$emit('toast', this.toast);\n    }\n  }\n};","map":{"version":3,"mappings":"AA4HA,OAAOA,aAAY,MAAO,2BAA0B;AACpD,OAAOC,YAAW,MAAO,+BAA8B;AACvD;AACA,OAAOC,WAAU,MAAO,mBAAkB;AAE1C,eAAc;EACVC,UAAU,EAAC;IACTF,YAAY;IACZ;IACEC;EACJ,CAAC;EACDE,IAAI,EAAE,YAAY;EAClBC,IAAI,GAAE;IACF,OAAM;MACJC,OAAO,EAAC,EAAE;MACVC,MAAM,EAAC;QACLC,EAAE,EAAC,CAAC;QACJJ,IAAI,EAAC,EAAE;QACPK,QAAQ,EAAC,EAAE;QACXC,MAAM,EAAC,EAAE;QACTC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE,KAAK;MAChBC,OAAO,EAAE,KAAI;MACbC,SAAS,EAAE,KAAK;MAChBC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAC;QACJC,OAAO,EAAC,EAAE;QACVC,KAAK,EAAC,EAAE;QACRC,OAAO,EAAE,IAAI;QACbC,MAAM,EAAE;MACV,CAAC;MACDC,WAAW,EAAE,CAEb;IACF;EACJ,CAAC;EACDC,OAAO,GAAE;IACP,IAAI,CAACC,aAAa,EAAC;IACnB;IACAC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACC,MAAM;EACzB,CAAC;EACDC,OAAO,EAAC;IACNC,YAAY,GAAE;MACZ,IAAI,CAACP,WAAW,CAACQ,MAAM,GAAE,MAAK;MAC9B,IAAI,CAACR,WAAW,CAACS,IAAG,GAAI,IAAG;MAC3B,IAAI,CAACC,KAAK,CAACC,WAAW,CAACC,OAAO,EAAC;IACjC,CAAC;IACD,MAAMV,aAAa,GAAE;MACnB,IAAG;QACD,IAAI,CAACjB,OAAM,GAAI,MAAMN,aAAa,CAACkC,eAAe,EAAC;QACnD;QACA,IAAI,CAAClB,KAAK,CAACC,OAAM,GAAI,eAAc;QACnC,IAAI,CAACD,KAAK,CAACE,KAAI,GAAI,cAAa;QAChC,IAAI,CAACF,KAAK,CAACG,OAAM,GAAI,IAAG;QACxB;MACF,EAAE,OAAMgB,KAAK,EAAC;QACZ,IAAI,CAACtB,OAAM,GAAI,IAAG;QAClB,IAAI,CAACC,SAAQ,GAAI,IAAG;QACpB,IAAI,CAACsB,SAAS,EAAC;MACjB;IACF,CAAC;IACDA,SAAS,GAAE;MACTC,UAAU,CAAC,MAAM;QACf,IAAI,CAACvB,SAAQ,GAAI,KAAI;MACvB,CAAC,EAAE,IAAI;IACT,CAAC;IACDwB,gBAAgB,GAAE;MAChBD,UAAU,CAAC,MAAM;QACf,IAAI,CAACtB,SAAQ,GAAI,KAAI;MACvB,CAAC,EAAE,IAAI;IACT,CAAC;IACDwB,gBAAgB,GAAE;MAChB,IAAI,CAACxB,SAAQ,GAAI,IAAG;MACpBsB,UAAU,CAAC,MAAM;QACf,IAAI,CAACtB,SAAQ,GAAI,KAAI;MACvB,CAAC,EAAE,IAAI;IACT,CAAC;IACD,MAAMyB,UAAU,GAAE;MAChB;MACA,IAAG,IAAI,CAACjC,MAAM,CAACC,EAAC,IAAK,CAAC,EAAC;QACrB,IAAI,CAACI,SAAQ,GAAI,IAAG;QACpB,IAAG;UACD,MAAMP,IAAG,GAAI,MAAML,aAAa,CAACyC,cAAc,CAAC,IAAI,CAAClC,MAAM;UAC3DiB,OAAO,CAACC,GAAG,CAACpB,IAAI;UAChB,IAAI,CAACkC,gBAAgB,EAAC;UACtBG,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,KAAK,EAAC;UAClD,IAAI,CAACC,WAAW,EAAC;UACjB,MAAM,IAAI,CAACtB,aAAa,EAAC;UACzB,IAAI,CAACX,SAAQ,GAAI,KAAI;QACvB,CAAC,QAAMuB,KAAK,EAAC;UACXX,OAAO,CAACC,GAAG,CAACU,KAAK;UACjB,IAAI,CAACtB,OAAM,GAAI,IAAG;UAClBiC,KAAK,CAAC,kBAAkB;UACxB,IAAI,CAACC,UAAU,EAAC;QAClB;MACF,CAAC,MAAI;QACHvB,OAAO,CAACC,GAAG,CAAC,eAAe;MAC7B;IACF,CAAC;IACDuB,YAAY,CAACzC,MAAM,EAAC;MAClBiB,OAAO,CAACC,GAAG,CAAClB,MAAM;IACpB,CAAC;IACDsC,WAAW,GAAE;MACX,IAAI,CAACtC,MAAM,CAACC,EAAC,GAAI;MACjB,IAAI,CAACD,MAAM,CAACG,MAAK,GAAI,EAAC;MACtB,IAAI,CAACH,MAAM,CAACH,IAAG,GAAI,EAAC;MACpB,IAAI,CAACG,MAAM,CAACE,QAAO,GAAI,EAAC;MACxB,IAAI,CAACG,SAAQ,GAAI,KAAI;IACvB,CAAC;IACDmC,UAAU,GAAE;MACVL,QAAQ,CAACC,cAAc,CAAC,kBAAkB,CAAC,CAACC,KAAK,EAAC;IACpD,CAAC;IACDK,YAAY,GAAE;MACZ,IAAI,CAACjC,KAAK,CAACG,OAAM,GAAI,IAAG;MACxB,IAAI,CAACH,KAAK,CAACI,MAAK,GAAI,OAAM;MAC1B,IAAI,CAACJ,KAAK,CAACC,OAAM,GAAI,YAAW;MAChC,IAAI,CAACiC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAClC,KAAK;IAChC;EAEF;AACJ","names":["personService","personDelete","ComponenteB","components","name","data","persons","person","id","lastName","genere","birthday","isLoading","isError","showError","isSuccess","toast","mensaje","clase","mostrar","titulo","personaData","created","getAllPersons","console","log","objeto","methods","enviarObjeto","nombre","edad","$refs","componenteB","saludar","getPersonsAsync","error","hideToast","setTimeout","hideToastSuccess","showToastSuccess","savePerson","setPersonAsync","document","getElementById","click","resetPerson","alert","closeModal","deletePerson","mostrarToast","$emit"],"sourceRoot":"","sources":["C:\\Users\\vmartinez\\source\\repos\\RollCall\\rollcall-vue\\src\\components\\Persons.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n\r\n      <!-- Button trigger modal -->\r\n      <button type=\"button\" class=\"btn btn-primary mb-2\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\r\n        Agregar persona\r\n      </button>\r\n\r\n        <!-- Modal -->\r\n      <form @submit.prevent=\"savePerson\">\r\n        <div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\" data-bs-autohide=\"true\" data-bs-delay=\"5000\">\r\n          <div class=\"modal-dialog modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Persona</h1>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\" id=\"buttonCloseModal\"></button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n\r\n                  <div class=\"form-group\">\r\n                    <label for=\"name\">Nombre</label>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Nombre\" v-model=\"person.name\"  :disabled=\"isLoading\">                    \r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <label for=\"lastName\">Apellidos</label>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Apellidos\" v-model=\"person.lastName\" :disabled=\"isLoading\">\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <label for=\"birthday\">Fecha de nacimiento</label>\r\n                    <input type=\"date\" class=\"form-control\" placeholder=\"Fecha de nacimiento\" v-model=\"person.birthday\" :disabled=\"isLoading\">\r\n                  </div>     \r\n                  <div class=\"form-group\">\r\n                    <label for=\"genere\">Genero</label>\r\n                    <select name=\"genere\" class=\"form-select\" v-model=\"person.genere\" :disabled=\"isLoading\">\r\n                      <option value=\"\">Seleccione</option>\r\n                      <option value=\"Masculino\">Masculino</option>\r\n                      <option value=\"Femenino\">Femenino</option>\r\n                    </select>\r\n                  </div>                    \r\n                </div>\r\n\r\n                <div class=\"modal-footer\">\r\n                  <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" :disabled=\"isLoading\" @click=\"resetPerson\" id=\"formClose\">Cerrar</button>\r\n                  <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isLoading\">\r\n                    <span v-if=\"!isLoading\">Guardar</span>                   \r\n                    <span v-if=\"isLoading\">Un momento &nbsp;</span>\r\n                    <span v-if=\"isLoading\">\r\n                      <div class=\"spinner-border spinner-border-sm text-white\" role=\"status\"></div>\r\n                    </span>\r\n\r\n                  </button>        \r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </form>\r\n\r\n    <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          <h1>Personas</h1>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div v-if=\"!isError\">\r\n            <div v-if=\"persons.length == 0\">\r\n              <div class=\"text-center\">\r\n                <div class=\"spinner-border text-primary\" role=\"status\"></div>\r\n                <span class=\"sr-only text-primary\">Cargando...</span>                \r\n              </div>\r\n            </div>            \r\n          </div>\r\n          \r\n          <div v-if=\"persons.length != 0\">\r\n          <table class=\"table\">\r\n            <tbody>\r\n              <tr v-for=\"person in persons\" :key=\"person.id\">\r\n                <td>{{ person.name }}</td>\r\n                <td>{{ person.lastName }}</td>\r\n                <td>\r\n                  <!-- <button @click=\"deletePerson(person)\" class=\"btn btn-danger\">Borrar</button> -->\r\n                  <button type=\"button\" class=\"btn btn-danger mb-2\" data-bs-toggle=\"modal\" data-bs-target=\"#personDeleteModal\">\r\n                    Borrar\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n        </div>\r\n    </div>\r\n      \r\n    <div class=\"toast-container position-fixed bottom-0 end-0 p-3\">\r\n      <div id=\"liveToast\" class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" :class=\"{'show': showError}\">\r\n        <div class=\"toast-header\">\r\n          <!-- <img src=\"...\" class=\"rounded me-2\" alt=\"...\"> -->\r\n          <strong class=\"me-auto text-danger\">Error</strong>          \r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"toast-body text-danger\">\r\n          Error al consultar con el servidor\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"toast-container position-fixed bottom-0 end-0 p-3\">\r\n      <div id=\"liveToast\" class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" :class=\"{'show': isSuccess}\">\r\n        <div class=\"toast-header\">\r\n          <!-- <img src=\"...\" class=\"rounded me-2\" alt=\"...\"> -->\r\n          <strong class=\"me-auto text-info\"></strong>          \r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"toast-body text-info\">\r\n          Datos registrados\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- <toast :toast=\"toast\" /> -->\r\n    <button class=\"btn btn-primary\" @click=\"enviarObjeto\">Mostrar toast</button>\r\n    <componente-b  :nombre=\"personaData.nombre\" :edad=\"personaData.edad\"/>\r\n  </div>\r\n  <personDelete/>\r\n</template>\r\n\r\n<script>\r\nimport personService from '@/services/PersonsService'\r\nimport personDelete from '@/components/PersonDelete.vue'\r\n//import Toast from './Toast.vue'\r\nimport ComponenteB from './ComponenteB.vue'\r\n\r\nexport default{\r\n    components:{\r\n      personDelete,\r\n      //Toast,\r\n        ComponenteB\r\n    },\r\n    name: 'person-vue',\r\n    data(){\r\n        return{\r\n          persons:[],\r\n          person:{\r\n            id:0,\r\n            name:'',\r\n            lastName:'',\r\n            genere:'',\r\n            birthday: ''\r\n          },\r\n          isLoading: false,\r\n          isError: false ,\r\n          showError: false,\r\n          isSuccess: false,\r\n          toast:{\r\n            mensaje:'',\r\n            clase:'',\r\n            mostrar: true,\r\n            titulo: ''\r\n          },\r\n          personaData: {\r\n          \r\n          }\r\n        }\r\n    }, \r\n    created(){\r\n      this.getAllPersons()\r\n      //console.log(Toast)\r\n      console.log(this.objeto)\r\n    },\r\n    methods:{\r\n      enviarObjeto(){\r\n        this.personaData.nombre= 'Juan'        \r\n        this.personaData.edad = '25'\r\n        this.$refs.componenteB.saludar()\r\n      },\r\n      async getAllPersons(){       \r\n        try{\r\n          this.persons = await personService.getPersonsAsync()\r\n          //console.log(this.persons)\r\n          this.toast.mensaje = \"Lista cargada\"\r\n          this.toast.clase = \"text-primary\"\r\n          this.toast.mostrar = true\r\n          //this.toast.titulo = 'Aviso'\r\n        } catch(error){\r\n          this.isError = true\r\n          this.showError = true          \r\n          this.hideToast()\r\n        }        \r\n      },\r\n      hideToast(){\r\n        setTimeout(() => {\r\n          this.showError = false\r\n        }, 5000)\r\n      },\r\n      hideToastSuccess(){\r\n        setTimeout(() => {\r\n          this.isSuccess = false\r\n        }, 5000)\r\n      },\r\n      showToastSuccess(){\r\n        this.isSuccess = true\r\n        setTimeout(() => {\r\n          this.isSuccess = false\r\n        }, 5000)\r\n      },\r\n      async savePerson(){\r\n        //console.log(this.person)\r\n        if(this.person.id == 0){\r\n          this.isLoading = true          \r\n          try{\r\n            const data = await personService.setPersonAsync(this.person)\r\n            console.log(data)\r\n            this.showToastSuccess()\r\n            document.getElementById('buttonCloseModal').click()\r\n            this.resetPerson()\r\n            await this.getAllPersons()\r\n            this.isLoading = false   \r\n          }catch(error){\r\n            console.log(error)\r\n            this.isError = true\r\n            alert(\"Ocurrio un error\")            \r\n            this.closeModal()\r\n          }\r\n        }else{\r\n          console.log(\"Not implement\")\r\n        }\r\n      },\r\n      deletePerson(person){\r\n        console.log(person)\r\n      },\r\n      resetPerson(){\r\n        this.person.id = 0\r\n        this.person.genere = ''\r\n        this.person.name = ''\r\n        this.person.lastName = ''\r\n        this.isLoading = false\r\n      },\r\n      closeModal(){\r\n        document.getElementById('buttonCloseModal').click()\r\n      },\r\n      mostrarToast(){\r\n        this.toast.mostrar = true\r\n        this.toast.titulo = \"Aviso\"\r\n        this.toast.mensaje = 'webos puto'\r\n        this.$emit('toast', this.toast)\r\n      },\r\n      \r\n    }    \r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import personService from '@/services/PersonsService';\nexport default {\n  name: 'person-vue',\n  data() {\n    return {\n      persons: [],\n      person: {\n        id: 0,\n        name: '',\n        lastName: '',\n        genere: '',\n        birthday: ''\n      },\n      isLoading: false,\n      isError: false,\n      showError: false,\n      isSuccess: false\n    };\n  },\n  created() {\n    this.getAllPersons();\n  },\n  methods: {\n    async getAllPersons() {\n      try {\n        this.persons = await personService.getPersonsAsync();\n        //console.log(this.persons)\n      } catch (error) {\n        this.isError = true;\n        this.showError = true;\n        this.hideToast();\n      }\n    },\n    hideToast() {\n      setTimeout(() => {\n        this.showError = false;\n      }, 5000);\n    },\n    hideToastSuccess() {\n      setTimeout(() => {\n        this.isSuccess = false;\n      }, 5000);\n    },\n    async savePerson() {\n      console.log(this.person);\n      if (this.person.id == 0) {\n        this.isLoading = true;\n        try {\n          //await personService.setPersonAsync(this.person)\n          this.isSuccess = true;\n          this.$('#staticBackdrop').modal('hide');\n        } catch (error) {\n          console.log(error);\n          this.isError = true;\n          alert(\"Ocurrio un error\");\n        }\n        this.isLoading = false;\n      } else {\n        console.log(\"Not implement\");\n      }\n    },\n    resetPerson() {\n      this.person.id = 0;\n      this.person.genere = '';\n      this.person.name = '';\n      this.person.lastName = '';\n      this.isLoading = false;\n    }\n  }\n};","map":{"version":3,"mappings":"AAkHA,OAAOA,aAAY,MAAO,2BAA0B;AAEpD,eAAc;EACVC,IAAI,EAAE,YAAY;EAClBC,IAAI,GAAE;IACF,OAAM;MACJC,OAAO,EAAC,EAAE;MACVC,MAAM,EAAC;QACLC,EAAE,EAAC,CAAC;QACJJ,IAAI,EAAC,EAAE;QACPK,QAAQ,EAAC,EAAE;QACXC,MAAM,EAAC,EAAE;QACTC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE,KAAK;MAChBC,OAAO,EAAE,KAAI;MACbC,SAAS,EAAE,KAAK;MAChBC,SAAS,EAAE;IACb;EACJ,CAAC;EACDC,OAAO,GAAE;IACP,IAAI,CAACC,aAAa,EAAC;EACrB,CAAC;EACDC,OAAO,EAAC;IACN,MAAMD,aAAa,GAAE;MACnB,IAAG;QACD,IAAI,CAACX,OAAM,GAAI,MAAMH,aAAa,CAACgB,eAAe,EAAC;QACnD;MACF,EAAE,OAAMC,KAAK,EAAC;QACZ,IAAI,CAACP,OAAM,GAAI,IAAG;QAClB,IAAI,CAACC,SAAQ,GAAI,IAAG;QACpB,IAAI,CAACO,SAAS,EAAC;MACjB;IACF,CAAC;IACDA,SAAS,GAAE;MACTC,UAAU,CAAC,MAAM;QACf,IAAI,CAACR,SAAQ,GAAI,KAAI;MACvB,CAAC,EAAE,IAAI;IACT,CAAC;IACDS,gBAAgB,GAAE;MAChBD,UAAU,CAAC,MAAM;QACf,IAAI,CAACP,SAAQ,GAAI,KAAI;MACvB,CAAC,EAAE,IAAI;IACT,CAAC;IACD,MAAMS,UAAU,GAAE;MAChBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACnB,MAAM;MACvB,IAAG,IAAI,CAACA,MAAM,CAACC,EAAC,IAAK,CAAC,EAAC;QACrB,IAAI,CAACI,SAAQ,GAAI,IAAG;QACpB,IAAG;UACD;UACA,IAAI,CAACG,SAAQ,GAAI,IAAG;UACpB,IAAI,CAACY,CAAC,CAAC,iBAAiB,CAAC,CAACC,KAAK,CAAC,MAAM;QACxC,CAAC,QAAMR,KAAK,EAAC;UACXK,OAAO,CAACC,GAAG,CAACN,KAAK;UACjB,IAAI,CAACP,OAAM,GAAI,IAAG;UAClBgB,KAAK,CAAC,kBAAkB;QAC1B;QACA,IAAI,CAACjB,SAAQ,GAAI,KAAI;MACvB,CAAC,MAAI;QACHa,OAAO,CAACC,GAAG,CAAC,eAAe;MAC7B;IACF,CAAC;IACDI,WAAW,GAAE;MACX,IAAI,CAACvB,MAAM,CAACC,EAAC,GAAI;MACjB,IAAI,CAACD,MAAM,CAACG,MAAK,GAAI,EAAC;MACtB,IAAI,CAACH,MAAM,CAACH,IAAG,GAAI,EAAC;MACpB,IAAI,CAACG,MAAM,CAACE,QAAO,GAAI,EAAC;MACxB,IAAI,CAACG,SAAQ,GAAI,KAAI;IACvB;EAEF;AACJ","names":["personService","name","data","persons","person","id","lastName","genere","birthday","isLoading","isError","showError","isSuccess","created","getAllPersons","methods","getPersonsAsync","error","hideToast","setTimeout","hideToastSuccess","savePerson","console","log","$","modal","alert","resetPerson"],"sourceRoot":"","sources":["C:\\Users\\vmartinez\\source\\repos\\RollCall\\rollcall-vue\\src\\components\\Persons.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n\r\n      <!-- Button trigger modal -->\r\n      <button type=\"button\" class=\"btn btn-primary mb-2\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\r\n        Agregar persona\r\n      </button>\r\n\r\n        <!-- Modal -->\r\n      <form @submit.prevent=\"savePerson\">\r\n        <div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\" data-bs-autohide=\"true\" data-bs-delay=\"5000\">\r\n          <div class=\"modal-dialog modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h1 class=\"modal-title fs-5\" id=\"staticBackdropLabel\">Persona</h1>\r\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n\r\n                  <div class=\"form-group\">\r\n                    <label for=\"name\">Nombre</label>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Nombre\" v-model=\"person.name\"  :disabled=\"isLoading\">                    \r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <label for=\"lastName\">Apellidos</label>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Apellidos\" v-model=\"person.lastName\" :disabled=\"isLoading\">\r\n                  </div>\r\n                  <div class=\"form-group\">\r\n                    <label for=\"birthday\">Fecha de nacimiento</label>\r\n                    <input type=\"date\" class=\"form-control\" placeholder=\"Fecha de nacimiento\" v-model=\"person.birthday\" :disabled=\"isLoading\">\r\n                  </div>     \r\n                  <div class=\"form-group\">\r\n                    <label for=\"genere\">Genero</label>\r\n                    <select name=\"genere\" class=\"form-select\" v-model=\"person.genere\" :disabled=\"isLoading\">\r\n                      <option value=\"\">Seleccione</option>\r\n                      <option value=\"Masculino\">Masculino</option>\r\n                      <option value=\"Femenino\">Femenino</option>\r\n                    </select>\r\n                  </div>                    \r\n                </div>\r\n\r\n                <div class=\"modal-footer\">\r\n                  <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" :disabled=\"isLoading\" @click=\"resetPerson\">Cerrar</button>\r\n                  <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isLoading\">\r\n                    <span v-if=\"!isLoading\">Guardar</span>                   \r\n                    <span v-if=\"isLoading\">Un momento &nbsp;</span>\r\n                    <span v-if=\"isLoading\">\r\n                      <div class=\"spinner-border spinner-border-sm text-white\" role=\"status\"></div>\r\n                    </span>\r\n\r\n                  </button>        \r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n      </form>\r\n\r\n    <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          <h1>Personas</h1>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div v-if=\"!isError\">\r\n            <div v-if=\"persons.length == 0\">\r\n              <div class=\"text-center\">\r\n                <div class=\"spinner-border text-primary\" role=\"status\"></div>\r\n                <span class=\"sr-only text-primary\">Cargando...</span>                \r\n              </div>\r\n            </div>            \r\n          </div>\r\n          \r\n          <div v-if=\"persons.length != 0\">\r\n          <table class=\"table\">\r\n            <tbody>\r\n              <tr v-for=\"person in persons\" :key=\"person.id\">\r\n                <td>{{ person.name }}</td>\r\n                <td>{{ person.lastName }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          </div>\r\n        </div>\r\n    </div>\r\n      \r\n    <div class=\"toast-container position-fixed bottom-0 end-0 p-3\">\r\n      <div id=\"liveToast\" class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" :class=\"{'show': showError}\">\r\n        <div class=\"toast-header\">\r\n          <!-- <img src=\"...\" class=\"rounded me-2\" alt=\"...\"> -->\r\n          <strong class=\"me-auto text-danger\">Error</strong>          \r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"toast-body text-danger\">\r\n          Error al consultar con el servidor\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"toast-container position-fixed bottom-0 end-0 p-3\">\r\n      <div id=\"liveToast\" class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\" :class=\"{'show': isSuccess}\">\r\n        <div class=\"toast-header\">\r\n          <!-- <img src=\"...\" class=\"rounded me-2\" alt=\"...\"> -->\r\n          <strong class=\"me-auto text-info\"></strong>          \r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"toast-body text-info\">\r\n          Datos registrados\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport personService from '@/services/PersonsService'\r\n\r\nexport default{\r\n    name: 'person-vue',\r\n    data(){\r\n        return{\r\n          persons:[],\r\n          person:{\r\n            id:0,\r\n            name:'',\r\n            lastName:'',\r\n            genere:'',\r\n            birthday: ''\r\n          },\r\n          isLoading: false,\r\n          isError: false ,\r\n          showError: false,\r\n          isSuccess: false       \r\n        }\r\n    }, \r\n    created(){\r\n      this.getAllPersons()\r\n    },\r\n    methods:{\r\n      async getAllPersons(){       \r\n        try{\r\n          this.persons = await personService.getPersonsAsync()\r\n          //console.log(this.persons)\r\n        } catch(error){\r\n          this.isError = true\r\n          this.showError = true          \r\n          this.hideToast()\r\n        }        \r\n      },\r\n      hideToast(){\r\n        setTimeout(() => {\r\n          this.showError = false\r\n        }, 5000)\r\n      },\r\n      hideToastSuccess(){\r\n        setTimeout(() => {\r\n          this.isSuccess = false\r\n        }, 5000)\r\n      },\r\n      async savePerson(){\r\n        console.log(this.person)\r\n        if(this.person.id == 0){\r\n          this.isLoading = true          \r\n          try{\r\n            //await personService.setPersonAsync(this.person)\r\n            this.isSuccess = true\r\n            this.$('#staticBackdrop').modal('hide')\r\n          }catch(error){\r\n            console.log(error)\r\n            this.isError = true\r\n            alert(\"Ocurrio un error\")            \r\n          }\r\n          this.isLoading = false\r\n        }else{\r\n          console.log(\"Not implement\")\r\n        }\r\n      },\r\n      resetPerson(){\r\n        this.person.id = 0\r\n        this.person.genere = ''\r\n        this.person.name = ''\r\n        this.person.lastName = ''\r\n        this.isLoading = false\r\n      },\r\n\r\n    }\r\n}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}